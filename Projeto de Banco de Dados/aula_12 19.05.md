# Scripsts SQL
* select --> importantes
  * 1) junção ou produto cartesiano
  * 2) operadores
  * 3) selects embutidos ou aninhados
  * 4) funções
  * 5) alias "apelidos "de colunas ou de tabelas - chave estrangeira da tabela para ela mesma 
  * 6) agrupar pelo group by com having
       
* avaliação de scripts que estão no repositório do professor
* https://github.com/alexandrezamberlan/bancoDeDadosUFN/blob/main/bancosDeDados/1.1%20-%20scriptSistemaEmpregadoDepartamento.sql
## 1 - Script Sistema Empregado Departamento
* tabela departamento
  * chave primaria = idDepartamento
  * como não tem index segue a organização estabelecida pela chave primaria
  * 

* tabela empregado
  * duas chaves primarias = idEmpregado e IdDepartamento
    * evita-se duas chaves primarias por causa do produto cartesiano
  * ordenando os empregados pelos departamentos
    * poderia ter uma organização dentro dos departamentos por ordem alfabetica
  * estabelencendo chave estrangeira
    * gerente deveria ter sido colocada como chave estrangeira
   
```sql
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`Departamento`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Departamento` (
  `idDepartamento` INT NOT NULL,
  `nome` VARCHAR(45) NOT NULL,
  `localizacao` VARCHAR(45) NOT NULL,
  `orcamento` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idDepartamento`))
ENGINE = InnoDB;

show tables;
-- -----------------------------------------------------
-- Table `mydb`.`Empregado`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Empregado` (
  `idEmpregado` INT NOT NULL,
  `nome` VARCHAR(45) NOT NULL,
  `idGerente` INT NULL,
  `funcao` VARCHAR(45) NULL,
  `Departamento_idDepartamento` INT NOT NULL,
  `dataAdmissao` DATE NOT NULL,
  `salario` INT NULL,
  `comissao` INT NULL,
  PRIMARY KEY (`idEmpregado`, `Departamento_idDepartamento`),
  INDEX `fk_Empregado_Departamento_idx` (`Departamento_idDepartamento` ASC),
  CONSTRAINT `fk_Empregado_Departamento`
    FOREIGN KEY (`Departamento_idDepartamento`)
    REFERENCES `mydb`.`Departamento` (`idDepartamento`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Empregado_Gerente`
    FOREIGN KEY (`idGerente`)
    REFERENCES `mydb`.`Empregado` (`idEmpregado`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
```
**CONSULTAS QUE PODEM SER FEITAS**
```SQL
show tables;
-- consultas de dados da tabelas
select * 
from departamento
where orcamento > 10000;

-- selecionando nome, função e id departamento
select nome, funcao, Departamento_idDepartamento
from Empregado;

-- seleciona de forma que ira aparecer o nome do departamento selecionado
-- para isso utiliza produto cartesiano, interação entre duas tabelas
select Empregado.nome, Empregado.funcao, Departamento.nome
from Empregado, Departamento
where Empregado.Departamento_IdDepartamento = Departamento.idDepartamento;

-- chefia = apelido para a tabela empregado, pois gerente tambem é da tabela empregado --> uma autoreferencia
-- verifica o nome dos empregados e caso ele tenha um gerente mostra o nome do seu gerente
select Empregado.nome, Chefia.nome
from Empregado, Empregado as Chefia
where Empregado.idEmpregado = Chefia.idGerente;


```

## 2 - Script Sistema Empregado Departamento

``` sql
-- inserindo dados na tabela departamento
INSERT INTO Departamento VALUES("1","Financeiro","Porto Alegre","100000");
INSERT INTO Departamento VALUES("2","Atendimento ao Cliente","Pelotas","1000000");
INSERT INTO Departamento VALUES("3","Suporte","Pelotas","10000");
INSERT INTO Departamento VALUES("4","Desenvolvimento","Novo Hamburgo","150000");
INSERT INTO Departamento VALUES("5","Infraestrutura","Taquara","200000");

-- mostra a toda a tabela departamento
select *
from Departamento;

-- selecionando na tabela os departamento que tem um orcamento definido entre 10.000 e 20.000
select *
from Departamento
where orcamento >= 10000 and orcamento <= 20000;

-- inserindo dados na tabela Empregado
INSERT INTO Empregado VALUES("1","Mariewa",NULL,"Gerente","1","2000-04-05","2300","0");
INSERT INTO Empregado VALUES("2","Zico","1","Tesoureiro","1","1999-08-13","100","0");
INSERT INTO Empregado VALUES("3","Lula",NULL,"Presidente","4","1950-01-01","10000","0");
INSERT INTO Empregado VALUES("4","Vera Fixer","5","Balconista","2","1999-05-05","3300","0");
INSERT INTO Empregado VALUES("5","Luana Pyovany",NULL,"Gerente","2","1998-06-23","2300","0");
INSERT INTO Empregado VALUES("6","Daniela Schicarelli",NULL,"Gerente","3","1999-10-10","2300","0");
INSERT INTO Empregado VALUES("7","Luize Altenhofen",NULL,"Gerente","4","1999-04-26","2300","0");
INSERT INTO Empregado VALUES("8","Helo Pinheiro",NULL,"Gerente","5","1997-09-25","2300","0");
INSERT INTO Empregado VALUES("9","Pelé","1","Caixa","1","2000-09-09","100",NULL);
INSERT INTO Empregado VALUES("10","Romário","1","Suporte","5","2001-12-25","100","0");
INSERT INTO Empregado VALUES("11","Malu Mader","5","Balconista","2","2001-10-20","3400","0");
INSERT INTO Empregado VALUES("12","Antônio Fagundes","7","Vendedor","2","2002-12-22","5000","10");


```
## 3 - Script Sistema Empregado Departamento

``` sql

```
